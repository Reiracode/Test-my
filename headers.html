<body>
  <h1 class="logo texthide">
    <a href="index.html">Rehome</a>
  </h1>
  <ul class="navlink">
    <li>
      <a class="modal_open">
        <img src="./images/cloversky/icon-search_black.svg" alt="">
      </a>
    </li>
    <li>
      <a href="project_shopcart.html">
        <img src="./images/cloversky/icon-cart_black.svg" alt="">
        <div class="shopart_amount"></div>
      </a>
    </li>

    <li>
      <div class="menu">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </li>
  </ul>

  <div class='overlay-test'>
    <ul>
      <li><a href="#">家具<small>FURNITURE</small></a></li>
      <li><a href="#">アート＆雑貨<small>FURNITURE</small></a></li>
      <li><a href="#">サービス<small>FURNITURE</small></a></li>
      <li><a href="#">会社概要<small>FURNITURE</small></a></li>
      <li><a href="#">家具<small>FURNITURE</small></a></li>
      <li><a href="http://localhost:8080/dashboard/F2E_project/form_test2_next2.html">single
          sofa<small>single</small></a></li>
      <li><a href="#">サービス<small>FURNITURE</small></a></li>
      <li><a href="#">会社概要<small>FURNITURE</small></a></li>
    </ul>
  </div>

  <div class="modal_bg">
    <button class="modal_close">
      <span></span>
      <span></span>
    </button>

    <div class="modal_box start" id="search">
      <form action="./collections.html" id="more_form" method="get">
        <input type="text" name="id" id="id">
        <span class="icon-search"></span>
      </form>
    </div>
  </div>

  <script>
    $(function () {
      window.onpageshow = function (event) {
        if (event.persisted) {
          alert("reloadheadr")
          window.location.reload();
        }
      }


      var url = location.href;
      // console.log(url)
      var data = JSON.parse(localStorage.getItem("cart"));
      // console.log(data)
      // console.log(data.length)
      if (!data) {
        $('.shopart_amount').css("display", "none")
      } else {
        if (!data.length) {
          $('.shopart_amount').css("display", "none")
        } else {
          $('.shopart_amount').text(data.length)
        }
      }
      // no animate modal searchoverlay open
      $(".modal_open").on('click', function (e) {
        console.log("open")
        $(".modal_bg").addClass('active');
        $("body").css("overflow", "hidden");
      })
      // overlay close
      $('.modal_close').click(() => {
        $(".modal_bg").removeClass('active');
        $("body").css("overflow", "auto");
      })

      $('.modal_bg').click((e) => {
        console.log($(e.target))
        console.log($(e.target).closest('.start'))
        console.log($(e.target).closest('.start').length)
        console.log(!$(e.target).closest('.start').length)

        if (!$(e.target).closest('.start').length) {
          // console.log("filter")
          // $('.modal_bg').css('display', 'none');
          $(".modal_bg").removeClass('active');
        }
      });

      $(".menu").click(function (event) {
        if ($(this).hasClass("active")) {
          console.log("Yes:Class")
          $(this).removeClass("active");
          $(".overlay-test").removeClass("open");
          $("body").css("overflow", "auto");

        } else {
          console.log("NOT:Class")
          $(this).addClass("active");
          $(".overlay-test").addClass("open");
          $("body").css("overflow", "hidden");
        }
      })

       

    })
  </script>
</body>