<body>
  <div class="headdds">
  <h1 class="logo texthide">
    <a href="index.html">Rehome</a>
  </h1>
  <ul class="navlink">
    <li>
      <a class="modal_open">
        <img src="./images/cloversky/icon-search_black.svg" alt="">
      </a>
    </li>
    <li>
      <a href="project_shopcart.html">
        <img src="./images/cloversky/icon-cart_black.svg" alt="">
        <div class="shopart_amount"></div>
      </a>
    </li>

    <li>
      <div class="menu">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </li>
  </ul>

  <div class='overlay-test'>
    <button class="modal_closes">
      <span></span>
      <span></span>
    </button>
    <ul>
      <li><a href="#">家具<small>FURNITURE</small></a></li>
      <li><a href="#">アート雑貨<small>FURNITURE</small></a></li>
      <li><a href="#">サービス<small>FURNITURE</small></a></li>
      <li><a href="#">会社概要<small>FURNITURE</small></a></li>
      <li><a href="#">家具<small>FURNITURE</small></a></li>
      <li><a href="http://localhost:8080/dashboard/F2E_project/form_test2_next2.html">single
          sofa<small>single</small></a></li>
      <li><a href="#">サービス<small>FURNITURE</small></a></li>
      <li><a href="#">会社概要<small>FURNITURE</small></a></li>
    </ul>
  </div>
  <div class="modal_bg">
    <button class="modal_close">
      <span></span>
      <span></span>
    </button>

    <div class="modal_box expand">
      <form action="./collections.html" class="more_form" method="get">
        <input type="text" name="findid" class="findid">
        <span class="icon-search"></span>
      </form>
    </div>
  </div>
</div>
  <script>
    $(function () {
      site_map();
      
      if (myUrl.main !== 'index.html'){
        if (window.matchMedia('(max-width: 480px)').matches) {
          $(window).scroll(function (e) {
            if ($(this).scrollTop() > 140) {
              $("header").addClass('ds-f');
            } else {
              $("header").removeClass('ds-f');
            }
          });
        }
      }

// shopcart amount
      
        // window.addEventListener('storage', function(evet){
        //   console.log(evet)
        //   //  console.log(evet.storageArea)
        // //  StorageEvent.storageArea
        // }, false);

      window.addEventListener('storage', event => {
        console.log(event);
          console.log( event.newValue);
      })



        // k1 cart
        // let datas = JSON.parse(localStorage.getItem('cart'));
        let datas = JSON.parse(localStorage.getItem('k1'));
//  prveios page
      window.onpageshow = function (event) {
        // addEventListener('Storage', chrome on storage change
        // k1 cart
        // let datas = JSON.parse(localStorage.getItem('cart'));
        let datas = JSON.parse(localStorage.getItem('k1'));
        console.log(datas)
        if (!datas) {
          $('.shopart_amount').css("display", "none")
        } else {
          if (!datas.length) {
            $('.shopart_amount').css("display", "none")
          } else {
            $('.shopart_amount').text(datas.length)
          }
        }
      }
 
 

      // let data = JSON.parse(localStorage.getItem("cart"));
      let data = JSON.parse(localStorage.getItem("k1"));

      if (!data) {
        $('.shopart_amount').css("display", "none")  
      } else {
        if (!data.length) {
          $('.shopart_amount').css("display", "none")
        } else {
          $('.shopart_amount').text(data.length)
        }
      }

      // no animate modal searchoverlay open
      $(".modal_open").on('click', function (event) {
        $(".modal_bg").addClass('active');
        $("body").css("overflow", "hidden");
      })
      // overlay close
      $('.modal_close').click(() => {
        $(".modal_bg").removeClass('active');
        $("body").css("overflow", "auto");
      })

      $('.modal_bg').click((e) => {
        if (!$(e.target).closest('.expand').length) {
            $(".modal_bg").removeClass('active');
            $("body").css("overflow", "auto");
        }
      });

      $(".menu").on('click', function (e) {
        // e.preventDefault();
        // e.stopPropagation();
        
        // $(this).addClass("active");
        $(".overlay-test").addClass("open");
        $("body").css("overflow", "hidden");

      })
      // $(document).on("click, tap", ".menu", function (event) {
      //   // do thing
      //    alert("Only touch event is fired");
      //   return false; // double event fix
      // }); 
      // $(".menu").on('touchstart click', function (event) {
      //   // event.preventDefault();
      //   // event.stopPropagation();
      //   if (event.type == "touchstart") {
      //     // $(this).off('click');
      //     console.log("Only touch event is fired");
      //     // alert(" touch event is fired");
      //     return false;

      //   } else if (event.type == "click") {
      //     // $(this).off('touchstart');
      //     console.log("Only click event is fired");
      //      return false;
      //     //  alert(" click event is fired");
      //   }

       
      //    $(".overlay-test").addClass("open");
      //   $("body").css("overflow", "hidden");

      // });


        // $(".menu").on('click', onlyClick, false);
        // function onlyClick(ev) {
        //   // Call preventDefault() to prevent any further handling
        //   console.log("Here a click event is triggered");
        //   ev.preventDefault();
        //   console.log("After triggering an event");
        // }

        // $(".menu").on("touchStart", onlyTouch, false);
      // function onlyTouch(ev) {
      //   // Call preventDefault() to prevent any further handling
      //   alert("Here a touchstart event is triggered");
      //   ev.preventDefault();
      // }
      

      $(".modal_closes").on('click', function (e) {

        // $(this).remove("active");
        $(".overlay-test").removeClass("open");
        $("body").css("overflow", "auto");

    })
      // $(".menu").click(function (event) {
      //   if ($(this).hasClass("active")) {
      //     console.log("Yes:Class")
      //     $(this).removeClass("active");
      //     $(".overlay-test").removeClass("open");
      //     $("body").css("overflow", "auto");

      //   } else {
      //     console.log("NOT:Class")
      //     $(this).addClass("active");
      //     $(".overlay-test").addClass("open");
      //     $("body").css("overflow", "hidden");
      //   }
      // })

 

    })
  </script>
</body>